<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Analyse concurrentielle – Octobre 2025</title>

  <!-- Chart.js pour les graphiques -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <!-- html2pdf pour l'export PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <style>
    :root {
      --primary: #003d7a;
      --primary-dark: #002855;
      --primary-light: #0052a3;
      --secondary: #0066cc;
      --accent: #00a8ff;
      --text: #1a1a1a;
      --text-light: #666;
      --bg: #f0f2f5;
      --white: #ffffff;
      --border: #e5e5e5;
      --shadow: rgba(0, 0, 0, 0.08);
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
      --info: #17a2b8;
    }

    [data-theme="dark"] {
      --primary: #4a9eff;
      --primary-dark: #3d8ae8;
      --primary-light: #5ca8ff;
      --secondary: #5ca8ff;
      --accent: #7db9ff;
      --text: #e8e8e8;
      --text-light: #a0a0a0;
      --bg: #0f1419;
      --white: #1a1f2e;
      --border: #2d3748;
      --shadow: rgba(0, 0, 0, 0.3);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    html {
      scroll-behavior: smooth;
      scroll-padding-top: 80px;
    }

    body {
      font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding-top: 80px;
      transition: background 0.3s ease, color 0.3s ease;
    }

    /* Navigation Sticky */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--white);
      box-shadow: 0 2px 10px var(--shadow);
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .navbar.scrolled {
      box-shadow: 0 4px 20px var(--shadow);
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 20px;
    }

    .nav-brand {
      font-size: 18px;
      font-weight: 700;
      color: var(--primary);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .nav-menu {
      display: flex;
      gap: 25px;
      list-style: none;
      align-items: center;
      flex-wrap: wrap;
    }

    .nav-menu a {
      color: var(--text);
      text-decoration: none;
      font-weight: 500;
      font-size: 14px;
      transition: color 0.3s ease;
      position: relative;
    }

    .nav-menu a:hover {
      color: var(--primary);
    }

    .nav-menu a::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--primary);
      transition: width 0.3s ease;
    }

    .nav-menu a:hover::after {
      width: 100%;
    }

    /* Theme Toggle */
    .theme-toggle {
      cursor: pointer;
      background: var(--bg);
      border: 2px solid var(--border);
      border-radius: 20px;
      padding: 8px 16px;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
      font-size: 14px;
      font-weight: 600;
    }

    .theme-toggle:hover {
      border-color: var(--primary);
      transform: translateY(-2px);
    }

    /* Action Buttons */
    .action-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 10px 20px;
      border-radius: 6px;
      font-weight: 600;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .btn-primary:hover {
      background: var(--primary-dark);
      border-color: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px var(--shadow);
    }

    .btn-outline {
      background: transparent;
      color: var(--primary);
      border-color: var(--primary);
    }

    .btn-outline:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-2px);
    }

    /* Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: var(--white);
      box-shadow: 0 2px 20px var(--shadow);
      margin-bottom: 40px;
      border-radius: 12px;
      overflow: hidden;
      animation: fadeInUp 0.6s ease;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Header Corporate */
    .header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      padding: 60px 50px;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse"><path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
      opacity: 0.3;
    }

    .header-content {
      position: relative;
      z-index: 1;
    }

    .header-meta {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 2px;
      text-transform: uppercase;
      opacity: 0.9;
      margin-bottom: 15px;
      display: inline-block;
      padding: 6px 12px;
      background: rgba(255,255,255,0.15);
      border-radius: 4px;
      backdrop-filter: blur(10px);
    }

    .header h1 {
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 20px;
      line-height: 1.3;
      letter-spacing: -0.5px;
      animation: slideInLeft 0.8s ease;
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .header-intro {
      font-size: 16px;
      opacity: 0.95;
      line-height: 1.8;
      max-width: 900px;
      animation: slideInRight 0.8s ease;
    }

    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    /* Quick Stats Dashboard */
    .quick-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      padding: 40px 50px;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
    }

    .stat-card {
      background: var(--white);
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 2px 8px var(--shadow);
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 24px var(--shadow);
      border-color: var(--primary);
    }

    .stat-icon {
      font-size: 32px;
      margin-bottom: 12px;
      display: block;
    }

    .stat-label {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 8px;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 700;
      color: var(--primary);
    }

    /* Section */
    .section {
      padding: 50px;
      border-bottom: 1px solid var(--border);
      animation: fadeIn 0.6s ease;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.6s ease;
    }

    .section.visible {
      opacity: 1;
      transform: translateY(0);
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .section:last-of-type {
      border-bottom: none;
    }

    /* Company Header avec collapse */
    .company-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, var(--bg) 0%, var(--white) 100%);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid var(--border);
    }

    .company-header:hover {
      border-color: var(--primary);
      transform: translateX(5px);
    }

    .company-title {
      display: flex;
      align-items: center;
    }

    .company-icon {
      font-size: 32px;
      margin-right: 15px;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .company-name {
      font-size: 24px;
      font-weight: 700;
      color: var(--primary);
      letter-spacing: -0.3px;
    }

    .collapse-icon {
      font-size: 24px;
      color: var(--text-light);
      transition: transform 0.3s ease;
    }

    .company-header.collapsed .collapse-icon {
      transform: rotate(-90deg);
    }

    .company-content {
      max-height: 5000px;
      overflow: hidden;
      transition: max-height 0.5s ease, opacity 0.5s ease;
      opacity: 1;
    }

    .company-content.collapsed {
      max-height: 0;
      opacity: 0;
    }

    /* KPI Cards */
    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .kpi-card {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      padding: 25px;
      border: 2px solid var(--border);
      border-radius: 12px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .kpi-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--primary);
      transform: scaleY(0);
      transition: transform 0.3s ease;
    }

    .kpi-card:hover::before {
      transform: scaleY(1);
    }

    .kpi-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 24px var(--shadow);
      border-color: var(--primary);
    }

    .kpi-label {
      font-size: 11px;
      font-weight: 700;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 10px;
    }

    .kpi-value {
      font-size: 28px;
      font-weight: 700;
      color: var(--text);
      line-height: 1.2;
      display: flex;
      align-items: baseline;
      gap: 8px;
    }

    .kpi-value small {
      font-size: 13px;
      display: block;
      margin-top: 8px;
      font-weight: 400;
      color: var(--text-light);
    }

    .kpi-badge {
      display: inline-block;
      padding: 4px 12px;
      background: var(--primary);
      color: white;
      font-size: 10px;
      font-weight: 700;
      border-radius: 12px;
      margin-left: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    /* Data Points */
    .data-points {
      background: var(--white);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 25px;
      transition: all 0.3s ease;
    }

    .data-points:hover {
      box-shadow: 0 4px 16px var(--shadow);
    }

    .data-points ul {
      list-style: none;
    }

    .data-points li {
      padding: 15px 0;
      border-bottom: 1px solid var(--border);
      font-size: 14px;
      line-height: 1.8;
      display: flex;
      align-items: start;
      gap: 10px;
    }

    .data-points li::before {
      content: '▸';
      color: var(--primary);
      font-weight: bold;
      flex-shrink: 0;
    }

    .data-points li:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    .data-points strong {
      color: var(--primary);
      font-weight: 700;
      min-width: 140px;
      display: inline-block;
    }

    /* Tooltip */
    .tooltip {
      position: relative;
      display: inline-block;
      cursor: help;
      border-bottom: 2px dotted var(--primary);
    }

    .tooltip .tooltiptext {
      visibility: hidden;
      width: 250px;
      background: var(--text);
      color: white;
      text-align: center;
      border-radius: 8px;
      padding: 10px;
      position: absolute;
      z-index: 100;
      bottom: 125%;
      left: 50%;
      margin-left: -125px;
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 13px;
      line-height: 1.4;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .tooltip .tooltiptext::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: var(--text) transparent transparent transparent;
    }

    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }

    /* Recommendation */
    .recommendation {
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      border-left: 5px solid var(--secondary);
      padding: 20px 25px;
      margin-top: 25px;
      font-size: 14px;
      line-height: 1.8;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .recommendation:hover {
      transform: translateX(5px);
      box-shadow: 0 4px 12px var(--shadow);
    }

    .recommendation strong {
      color: var(--primary);
      font-weight: 700;
      text-transform: uppercase;
      font-size: 12px;
      letter-spacing: 1px;
      display: block;
      margin-bottom: 8px;
    }

    /* Charts Container */
    .charts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 30px;
      margin: 30px 0;
    }

    .chart-container {
      background: var(--white);
      padding: 25px;
      border-radius: 12px;
      border: 2px solid var(--border);
      box-shadow: 0 2px 8px var(--shadow);
      transition: all 0.3s ease;
    }

    .chart-container:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 24px var(--shadow);
    }

    .chart-title {
      font-size: 16px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 20px;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Section Title */
    .section-title {
      font-size: 28px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 35px;
      padding-bottom: 15px;
      border-bottom: 3px solid var(--primary);
      letter-spacing: -0.5px;
      position: relative;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: -3px;
      left: 0;
      width: 100px;
      height: 3px;
      background: var(--accent);
    }

    /* Table */
    .table-container {
      overflow-x: auto;
      margin-top: 30px;
      border: 2px solid var(--border);
      border-radius: 12px;
      box-shadow: 0 4px 12px var(--shadow);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: var(--white);
    }

    thead {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
    }

    th {
      padding: 18px 16px;
      text-align: left;
      font-weight: 700;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
      line-height: 1.4;
      border-right: 1px solid rgba(255,255,255,0.2);
    }

    th:last-child {
      border-right: none;
    }

    td {
      padding: 16px;
      border-bottom: 1px solid var(--border);
      border-right: 1px solid var(--border);
      font-size: 14px;
      transition: all 0.2s ease;
    }

    td:last-child {
      border-right: none;
    }

    tbody tr {
      transition: all 0.3s ease;
    }

    tbody tr:hover {
      background: var(--bg);
      transform: scale(1.01);
    }

    tbody tr:last-child td {
      border-bottom: none;
    }

    tbody td:first-child {
      font-weight: 700;
      color: var(--text);
      background: var(--bg);
    }

    tbody td strong {
      color: var(--primary);
      font-weight: 700;
      font-size: 16px;
    }

    /* Comparator Tool */
    .comparator-tool {
      background: var(--bg);
      padding: 30px;
      border-radius: 12px;
      margin: 30px 0;
      border: 2px solid var(--border);
    }

    .comparator-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 20px;
      text-align: center;
    }

    .company-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .selector-item {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .selector-item input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: var(--primary);
    }

    .selector-item label {
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
    }

    .comparison-results {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .compare-card {
      background: var(--white);
      padding: 20px;
      border-radius: 12px;
      border: 2px solid var(--primary);
      box-shadow: 0 4px 12px var(--shadow);
    }

    .compare-card h3 {
      color: var(--primary);
      margin-bottom: 15px;
      font-size: 18px;
    }

    .compare-card ul {
      list-style: none;
    }

    .compare-card li {
      padding: 8px 0;
      border-bottom: 1px solid var(--border);
      font-size: 13px;
    }

    .compare-card li:last-child {
      border-bottom: none;
    }

    /* Executive Summary */
    .executive-summary {
      background: linear-gradient(135deg, var(--bg) 0%, var(--white) 100%);
      border: 2px solid var(--border);
      padding: 40px;
      border-radius: 12px;
      margin-top: 30px;
      box-shadow: 0 4px 16px var(--shadow);
    }

    .summary-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 25px;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 16px;
    }

    .executive-summary p {
      margin-bottom: 20px;
      font-size: 15px;
      line-height: 1.8;
      color: var(--text);
    }

    .executive-summary p:last-child {
      margin-bottom: 0;
    }

    .executive-summary strong {
      color: var(--primary);
      font-weight: 700;
    }

    /* Footer */
    .footer {
      padding: 40px 50px;
      background: var(--bg);
      border-top: 2px solid var(--border);
      font-size: 13px;
      color: var(--text-light);
      line-height: 1.8;
    }

    .footer-section {
      margin-bottom: 15px;
    }

    .footer-label {
      font-weight: 700;
      color: var(--text);
      text-transform: uppercase;
      font-size: 11px;
      letter-spacing: 1px;
      margin-right: 10px;
    }

    /* Scroll to Top */
    .scroll-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--primary);
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px var(--shadow);
      z-index: 999;
    }

    .scroll-top.visible {
      opacity: 1;
      visibility: visible;
    }

    .scroll-top:hover {
      background: var(--primary-dark);
      transform: translateY(-5px);
    }

    /* Badges */
    .secondary-badge {
      background: var(--text-light);
      color: white;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      margin-left: 10px;
      letter-spacing: 0.5px;
    }

    /* Loading Animation */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Responsive */
    @media (max-width: 768px) {
      body { padding-top: 70px; }
      .nav-container { padding: 12px 20px; flex-wrap: wrap; }
      .nav-menu { display: none; }
      .header, .section, .footer { padding: 30px 25px; }
      .header h1 { font-size: 24px; }
      .section-title { font-size: 22px; }
      .kpi-grid { grid-template-columns: 1fr; }
      .charts-grid { grid-template-columns: 1fr; }
      table { font-size: 12px; }
      th, td { padding: 10px 8px; }
      .quick-stats { grid-template-columns: 1fr; }
      .scroll-top { bottom: 20px; right: 20px; width: 45px; height: 45px; }
    }

    /* Print Styles */
    @media print {
      body { padding-top: 0; background: white; }
      .navbar, .scroll-top, .theme-toggle, .btn { display: none !important; }
      .section { page-break-inside: avoid; }
    }
  </style>
</head>
<body>

  <!-- Navigation Sticky -->
  <nav class="navbar" id="navbar">
    <div class="nav-container">
      <a href="#" class="nav-brand">
        <span>📊</span>
        <span>Analyse Concurrentielle</span>
      </a>

      <ul class="nav-menu">
        <li><a href="#stats">Statistiques</a></li>
        <li><a href="#companies">Entreprises</a></li>
        <li><a href="#comparison">Comparaison</a></li>
        <li><a href="#charts">Graphiques</a></li>
        <li><a href="#summary">Synthèse</a></li>
      </ul>

      <div class="action-buttons">
        <button class="theme-toggle" id="themeToggle">
          <span id="themeIcon">🌙</span>
          <span id="themeText">Sombre</span>
        </button>
        <button class="btn btn-primary" id="exportPdf">
          📄 Export PDF
        </button>
      </div>
    </div>
  </nav>

  <div class="container" id="content">
    <!-- Header -->
    <div class="header">
      <div class="header-content">
        <div class="header-meta">Analyse concurrentielle — Septembre 2025</div>
        <h1>Benchmark des réseaux d'hébergements de charme, patrimoniaux et groupes</h1>
        <p class="header-intro">Destinataire : Patrice | Cette analyse comparative couvre six acteurs majeurs du secteur : Bienvenue au Château, Esprit de France, My Happy House (sites principal et secondaire), Cosy Places by GAPH, et Gitedegroupe.fr.</p>
      </div>
    </div>

    <!-- Quick Stats Dashboard -->
    <div class="quick-stats" id="stats">
      <div class="stat-card">
        <span class="stat-icon">🏢</span>
        <div class="stat-label">Entreprises analysées</div>
        <div class="stat-value">6</div>
      </div>
      <div class="stat-card">
        <span class="stat-icon">🏨</span>
        <div class="stat-label">Total établissements</div>
        <div class="stat-value">3,186</div>
      </div>
      <div class="stat-card">
        <span class="stat-icon">👥</span>
        <div class="stat-label">Visites mensuelles totales</div>
        <div class="stat-value">112,767</div>
      </div>
      <div class="stat-card">
        <span class="stat-icon">🌍</span>
        <div class="stat-label">Marchés couverts</div>
        <div class="stat-value">10+</div>
      </div>
    </div>

    <!-- Companies Section -->
    <div id="companies">

      <!-- Bienvenue au Château -->
      <div class="section">
        <div class="company-header" onclick="toggleCollapse(this)">
          <div class="company-title">
            <span class="company-icon">🏰</span>
            <span class="company-name">Bienvenue au Château</span>
          </div>
          <span class="collapse-icon">▼</span>
        </div>

        <div class="company-content">
          <div class="kpi-grid">
            <div class="kpi-card">
              <div class="kpi-label">Création</div>
              <div class="kpi-value">2002<small>Association loi 1901</small></div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Lieux référencés</div>
              <div class="kpi-value">68</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">
                <span class="tooltip">Visites mensuelles
                  <span class="tooltiptext">Nombre moyen de visiteurs uniques par mois</span>
                </span>
              </div>
              <div class="kpi-value">10,865</div>
            </div>
          </div>

          <div class="data-points">
            <ul>
              <li><strong>Trafic :</strong> 59,6 % organique • 25,3 % social (Pinterest) • 15,1 % autres</li>
              <li><strong>Géographie :</strong> Allemagne 44,5 % • Royaume-Uni 18,5 % • France 15,0 %</li>
              <li><strong>Engagement :</strong> Durée moyenne 1 min 28 • 2,32 pages/visite •
                <span class="tooltip">Taux de rebond 39,9 %
                  <span class="tooltiptext">Excellent ! Un taux de rebond faible indique que les visiteurs explorent le site</span>
                </span>
              </li>
            </ul>
          </div>

          <div class="recommendation">
            <strong>Recommandations stratégiques :</strong> Renforcer la visibilité sur le marché français et diversifier les canaux d'acquisition au-delà du social.
          </div>
        </div>
      </div>

      <!-- Esprit de France -->
      <div class="section">
        <div class="company-header" onclick="toggleCollapse(this)">
          <div class="company-title">
            <span class="company-icon">🏡</span>
            <span class="company-name">Esprit de France</span>
          </div>
          <span class="collapse-icon">▼</span>
        </div>

        <div class="company-content">
          <div class="kpi-grid">
            <div class="kpi-card">
              <div class="kpi-label">Création</div>
              <div class="kpi-value">1981<small>44 ans d'expérience</small></div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Établissements</div>
              <div class="kpi-value">40</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Visites mensuelles</div>
              <div class="kpi-value">34,518</div>
            </div>
          </div>

          <div class="data-points">
            <ul>
              <li><strong>Trafic :</strong> 52,6 % organique • 29,8 % direct • 9,6 % referral • 8,0 % autres</li>
              <li><strong>Géographie :</strong> États-Unis 34,9 % • France 22,6 % • Royaume-Uni 8,5 %</li>
              <li><strong>Engagement :</strong> Durée moyenne 43 secondes • 2,48 pages/visite • Taux de rebond 47,8 %</li>
            </ul>
          </div>

          <div class="recommendation">
            <strong>Recommandations stratégiques :</strong> Améliorer les métriques d'engagement et augmenter la part d'audience française.
          </div>
        </div>
      </div>

      <!-- My Happy House (principal) -->
      <div class="section">
        <div class="company-header" onclick="toggleCollapse(this)">
          <div class="company-title">
            <span class="company-icon">🌿</span>
            <span class="company-name">My Happy House</span>
          </div>
          <span class="collapse-icon">▼</span>
        </div>

        <div class="company-content">
          <div class="kpi-grid">
            <div class="kpi-card">
              <div class="kpi-label">Création</div>
              <div class="kpi-value">2022<small>3 ans d'activité</small></div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Hébergements</div>
              <div class="kpi-value">154</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Visites mensuelles</div>
              <div class="kpi-value">1,101</div>
            </div>
          </div>

          <div class="data-points">
            <ul>
              <li><strong>Trafic :</strong> 36,9 % organique • 33,3 % social • 13,2 % direct • 16,6 % autres</li>
              <li><strong>Géographie :</strong> France 100 % (marché exclusivement domestique)</li>
              <li><strong>Engagement :</strong> Durée moyenne 1 min 01 • 2,50 pages/visite • Taux de rebond 39,8 %</li>
            </ul>
          </div>

          <div class="recommendation">
            <strong>Recommandations stratégiques :</strong> Développer la notoriété de marque et explorer les opportunités d'expansion internationale.
          </div>
        </div>
      </div>

      <!-- my-happy.house (site secondaire) -->
      <div class="section">
        <div class="company-header" onclick="toggleCollapse(this)">
          <div class="company-title">
            <span class="company-icon">🍃</span>
            <span class="company-name">my-happy.house<span class="secondary-badge">Site secondaire</span></span>
          </div>
          <span class="collapse-icon">▼</span>
        </div>

        <div class="company-content">
          <div class="kpi-grid">
            <div class="kpi-card">
              <div class="kpi-label">Statut</div>
              <div class="kpi-value">Additionnel</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Visites mensuelles</div>
              <div class="kpi-value">21</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Géographie</div>
              <div class="kpi-value">Italie 100 %</div>
            </div>
          </div>

          <div class="data-points">
            <ul>
              <li><strong>Trafic :</strong> Répartition instable en raison du très faible volume de données</li>
              <li><strong>Engagement :</strong> 1,00 page/visite • Durée non disponible • Taux de rebond ~49 %</li>
            </ul>
          </div>

          <div class="recommendation">
            <strong>Recommandations stratégiques :</strong> Consolider et centraliser le trafic sur le domaine principal pour optimiser les performances SEO.
          </div>
        </div>
      </div>

      <!-- Cosy Places -->
      <div class="section">
        <div class="company-header" onclick="toggleCollapse(this)">
          <div class="company-title">
            <span class="company-icon">🌍</span>
            <span class="company-name">Cosy Places by GAPH</span>
          </div>
          <span class="collapse-icon">▼</span>
        </div>

        <div class="company-content">
          <div class="kpi-grid">
            <div class="kpi-card">
              <div class="kpi-label">Création</div>
              <div class="kpi-value">≈ 2016<small>Structure actuelle : 2024-25</small></div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Établissements</div>
              <div class="kpi-value">1,080</div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Visites mensuelles</div>
              <div class="kpi-value">1,263</div>
            </div>
          </div>

          <div class="data-points">
            <ul>
              <li><strong>Trafic :</strong> 62,3 % organique • 23,0 % referral • 10,3 % direct • 4,4 % autres</li>
              <li><strong>Géographie :</strong> France 100 % (positionnement national actuel)</li>
              <li><strong>Engagement :</strong> Durée moyenne 42 secondes • 1,97 pages/visite • Taux de rebond 43,6 %</li>
            </ul>
          </div>

          <div class="recommendation">
            <strong>Recommandations stratégiques :</strong> Consolider la présence digitale et harmoniser la cohérence du réseau international (1 080 établissements).
          </div>
        </div>
      </div>

      <!-- Gitedegroupe.fr -->
      <div class="section">
        <div class="company-header" onclick="toggleCollapse(this)">
          <div class="company-title">
            <span class="company-icon">🏘️</span>
            <span class="company-name">Gitedegroupe.fr</span>
          </div>
          <span class="collapse-icon">▼</span>
        </div>

        <div class="company-content">
          <div class="kpi-grid">
            <div class="kpi-card">
              <div class="kpi-label">Création</div>
              <div class="kpi-value">2009<small>16 ans d'activité</small></div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Établissements</div>
              <div class="kpi-value">1,844<span class="kpi-badge">Leader</span></div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Visites mensuelles</div>
              <div class="kpi-value">64,999<span class="kpi-badge">Leader</span></div>
            </div>
          </div>

          <div class="data-points">
            <ul>
              <li><strong>Trafic :</strong> 64,6 % organique • 30,8 % direct • 3,6 % referral • 1,0 % autres</li>
              <li><strong>Géographie :</strong> France 89,0 % • Belgique 4,9 % • Suisse 1,9 % • Autres 4,2 %</li>
              <li><strong>Engagement :</strong> Durée moyenne 3 min 16 • 4,42 pages/visite • Taux de rebond 37,1 %</li>
            </ul>
          </div>

          <div class="recommendation">
            <strong>Recommandations stratégiques :</strong> Performance SEO exceptionnelle confirmée — poursuivre la diversification des canaux digitaux pour réduire la dépendance organique.
          </div>
        </div>
      </div>
    </div>

    <!-- Comparator Tool -->
    <div class="section" id="comparison">
      <h2 class="section-title">Outil de comparaison interactif</h2>

      <div class="comparator-tool">
        <div class="comparator-title">Sélectionnez les entreprises à comparer</div>

        <div class="company-selector">
          <div class="selector-item">
            <input type="checkbox" id="comp1" value="bienvenue" onchange="updateComparison()">
            <label for="comp1">🏰 Bienvenue au Château</label>
          </div>
          <div class="selector-item">
            <input type="checkbox" id="comp2" value="esprit" onchange="updateComparison()">
            <label for="comp2">🏡 Esprit de France</label>
          </div>
          <div class="selector-item">
            <input type="checkbox" id="comp3" value="myhappy" onchange="updateComparison()">
            <label for="comp3">🌿 My Happy House</label>
          </div>
          <div class="selector-item">
            <input type="checkbox" id="comp4" value="cosy" onchange="updateComparison()">
            <label for="comp4">🌍 Cosy Places</label>
          </div>
          <div class="selector-item">
            <input type="checkbox" id="comp5" value="gite" onchange="updateComparison()">
            <label for="comp5">🏘️ Gitedegroupe.fr</label>
          </div>
        </div>

        <div class="comparison-results" id="comparisonResults"></div>
      </div>
    </div>

    <!-- Charts Section -->
    <div class="section" id="charts">
      <h2 class="section-title">Visualisations et graphiques interactifs</h2>

      <div class="charts-grid">
        <div class="chart-container">
          <div class="chart-title">Visites mensuelles par entreprise</div>
          <canvas id="visitsChart"></canvas>
        </div>

        <div class="chart-container">
          <div class="chart-title">Nombre d'établissements</div>
          <canvas id="establishmentsChart"></canvas>
        </div>

        <div class="chart-container">
          <div class="chart-title">Répartition du trafic organique</div>
          <canvas id="organicChart"></canvas>
        </div>

        <div class="chart-container">
          <div class="chart-title">Métriques d'engagement</div>
          <canvas id="engagementChart"></canvas>
        </div>

        <div class="chart-container">
          <div class="chart-title">Taux de rebond comparatif</div>
          <canvas id="bounceChart"></canvas>
        </div>

        <div class="chart-container">
          <div class="chart-title">Sources de trafic</div>
          <canvas id="trafficChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Tableau Comparatif -->
    <div class="section">
      <h2 class="section-title">Tableau comparatif synthétique</h2>

      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Indicateur clé</th>
              <th>Bienvenue<br>au Château</th>
              <th>Esprit<br>de France</th>
              <th>My Happy<br>House</th>
              <th>my-happy<br>.house</th>
              <th>Cosy<br>Places</th>
              <th>Gitedegroupe<br>.fr</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Visites mensuelles</td>
              <td>10,865</td>
              <td>34,518</td>
              <td>1,101</td>
              <td>21</td>
              <td>1,263</td>
              <td><strong>64,999</strong></td>
            </tr>
            <tr>
              <td>Année de création</td>
              <td>2002</td>
              <td><strong>1981</strong></td>
              <td>2022</td>
              <td>—</td>
              <td>≈ 2016</td>
              <td>2009</td>
            </tr>
            <tr>
              <td>Établissements</td>
              <td>68</td>
              <td>40</td>
              <td>154</td>
              <td>—</td>
              <td>1,080</td>
              <td><strong>1,844</strong></td>
            </tr>
            <tr>
              <td>Trafic organique</td>
              <td>59,6 %</td>
              <td>52,6 %</td>
              <td>36,9 %</td>
              <td>N/A</td>
              <td>62,3 %</td>
              <td><strong>64,6 %</strong></td>
            </tr>
            <tr>
              <td>Durée moyenne</td>
              <td>1 min 28</td>
              <td>43 sec</td>
              <td>1 min 01</td>
              <td>N/A</td>
              <td>42 sec</td>
              <td><strong>3 min 16</strong></td>
            </tr>
            <tr>
              <td>Pages/visite</td>
              <td>2,32</td>
              <td>2,48</td>
              <td>2,50</td>
              <td>1,00</td>
              <td>1,97</td>
              <td><strong>4,42</strong></td>
            </tr>
            <tr>
              <td>Audience française</td>
              <td>15 %</td>
              <td>22 %</td>
              <td>100 %</td>
              <td>0 %</td>
              <td>100 %</td>
              <td><strong>89 %</strong></td>
            </tr>
            <tr>
              <td>Trafic social</td>
              <td>25,3 %</td>
              <td>5,3 %</td>
              <td><strong>33,3 %</strong></td>
              <td>N/A</td>
              <td>3,7 %</td>
              <td>&lt; 1 %</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Explication Taux de Rebond -->
    <div class="section">
      <h2 class="section-title">Comprendre le taux de rebond</h2>

      <div class="executive-summary">
        <div class="summary-title">Définition</div>

        <p>
          Le <strong>taux de rebond</strong> mesure le pourcentage de visiteurs qui quittent le site après avoir consulté une seule page, sans interaction supplémentaire. C'est un indicateur clé de l'engagement et de la qualité de l'expérience utilisateur.
        </p>

        <p>
          <strong>Exemple concret :</strong> Si 100 personnes visitent un site et que 40 d'entre elles repartent immédiatement sans cliquer sur aucun lien ni consulter d'autres pages, le taux de rebond est de 40 %.
        </p>
      </div>

      <div class="data-points" style="margin-top: 20px;">
        <ul>
          <li><strong>Taux faible (30-40%) :</strong> Excellent — Les visiteurs explorent le site et trouvent le contenu pertinent</li>
          <li><strong>Taux moyen (40-60%) :</strong> Acceptable — Performance correcte mais améliorable</li>
          <li><strong>Taux élevé (60%+) :</strong> Problématique — Indique souvent un contenu non pertinent, une navigation confuse ou des problèmes techniques</li>
        </ul>
      </div>

      <div class="recommendation" style="margin-top: 20px;">
        <strong>Dans cette analyse :</strong> Gitedegroupe.fr affiche le meilleur taux de rebond (37,1 %), combiné à une durée de visite exceptionnelle (3 min 16), démontrant un fort engagement des utilisateurs. À l'inverse, Esprit de France (47,8 %) pourrait améliorer sa rétention en optimisant son contenu et sa navigation.
      </div>
    </div>

    <!-- Synthèse Executive -->
    <div class="section" id="summary">
      <h2 class="section-title">Synthèse executive</h2>

      <div class="executive-summary">
        <div class="summary-title">Points clés de l'analyse</div>

        <p>
          <strong>Gitedegroupe.fr</strong> s'impose comme le leader incontesté du secteur avec 64,999 visites mensuelles et des métriques d'engagement exceptionnelles (3 min 16, 4,42 pages/visite). Son ancrage SEO solide (64,6 % organique) et son réseau de 1,844 établissements constituent des avantages concurrentiels majeurs.
        </p>

        <p>
          <strong>Esprit de France</strong> maintient sa position de référence premium avec un rayonnement international établi, particulièrement aux États-Unis (34,9 % du trafic). Malgré 34,518 visites mensuelles, l'engagement reste à améliorer.
        </p>

        <p>
          <strong>Bienvenue au Château</strong> démontre une cohérence patrimoniale forte avec un excellent engagement (1 min 28) mais souffre d'un déficit de notoriété sur le marché français (15 % seulement).
        </p>

        <p>
          <strong>My Happy House</strong> (site principal) affiche un dynamisme notable pour une structure récente (3 ans), avec un bon engagement et une forte présence sociale (33,3 %). Le site secondaire my-happy.house (21 visites) nécessite une consolidation.
        </p>

        <p>
          <strong>Cosy Places by GAPH</strong> capitalise sur un vaste réseau international de 1,080 établissements et d'excellentes performances SEO (62,3 % organique), bien que l'engagement reste perfectible.
        </p>
      </div>

      <div style="text-align: center; margin-top: 30px;">
        <button class="btn btn-primary" onclick="downloadPDF()">
          📄 Télécharger le rapport complet (PDF)
        </button>
        <button class="btn btn-outline" onclick="window.print()">
          🖨️ Imprimer
        </button>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <div class="footer-section">
        <span class="footer-label">Destinataire :</span>
        <span>Patrice</span>
      </div>
      <div style="height: 1px; background: var(--border); margin: 20px 0;"></div>
      <div class="footer-section">
        <span class="footer-label">Sources :</span>
        <span>SimilarWeb (septembre 2025) • Données réseaux partenaires • Données arrondies</span>
      </div>
      <div class="footer-section">
        <span class="footer-label">Confidentialité :</span>
        <span>Document réservé à un usage interne</span>
      </div>
      <div class="footer-section" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border);">
        <span class="footer-label">Version améliorée :</span>
        <span>Interface interactive avec graphiques, mode sombre, export PDF et comparateur dynamique</span>
      </div>
    </div>
  </div>

  <!-- Scroll to Top -->
  <div class="scroll-top" id="scrollTop" onclick="scrollToTop()">
    ↑
  </div>

  <script>
    // Company data
    const companyData = {
      bienvenue: {
        name: '🏰 Bienvenue au Château',
        visits: 10865,
        establishments: 68,
        year: 2002,
        organic: 59.6,
        bounce: 39.9,
        duration: 88,
        pages: 2.32
      },
      esprit: {
        name: '🏡 Esprit de France',
        visits: 34518,
        establishments: 40,
        year: 1981,
        organic: 52.6,
        bounce: 47.8,
        duration: 43,
        pages: 2.48
      },
      myhappy: {
        name: '🌿 My Happy House',
        visits: 1101,
        establishments: 154,
        year: 2022,
        organic: 36.9,
        bounce: 39.8,
        duration: 61,
        pages: 2.50
      },
      cosy: {
        name: '🌍 Cosy Places',
        visits: 1263,
        establishments: 1080,
        year: 2016,
        organic: 62.3,
        bounce: 43.6,
        duration: 42,
        pages: 1.97
      },
      gite: {
        name: '🏘️ Gitedegroupe.fr',
        visits: 64999,
        establishments: 1844,
        year: 2009,
        organic: 64.6,
        bounce: 37.1,
        duration: 196,
        pages: 4.42
      }
    };

    // Theme Toggle
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const themeText = document.getElementById('themeText');

    // Check saved theme
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    updateThemeUI(savedTheme);

    themeToggle.addEventListener('click', () => {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateThemeUI(newTheme);

      // Recreate charts with new theme
      setTimeout(createCharts, 100);
    });

    function updateThemeUI(theme) {
      if (theme === 'dark') {
        themeIcon.textContent = '☀️';
        themeText.textContent = 'Clair';
      } else {
        themeIcon.textContent = '🌙';
        themeText.textContent = 'Sombre';
      }
    }

    // Navbar scroll effect
    const navbar = document.getElementById('navbar');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        navbar.classList.add('scrolled');
      } else {
        navbar.classList.remove('scrolled');
      }
    });

    // Scroll to top button
    const scrollTop = document.getElementById('scrollTop');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        scrollTop.classList.add('visible');
      } else {
        scrollTop.classList.remove('visible');
      }
    });

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Collapse/Expand sections
    function toggleCollapse(element) {
      element.classList.toggle('collapsed');
      const content = element.nextElementSibling;
      content.classList.toggle('collapsed');
    }

    // Intersection Observer for animations
    const sections = document.querySelectorAll('.section');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, { threshold: 0.1 });

    sections.forEach(section => {
      observer.observe(section);
    });

    // Comparison tool
    function updateComparison() {
      const results = document.getElementById('comparisonResults');
      results.innerHTML = '';

      const selected = [];
      for (let i = 1; i <= 5; i++) {
        const checkbox = document.getElementById(`comp${i}`);
        if (checkbox && checkbox.checked) {
          selected.push(checkbox.value);
        }
      }

      if (selected.length === 0) {
        results.innerHTML = '<p style="text-align: center; color: var(--text-light); padding: 20px;">Sélectionnez au moins une entreprise pour commencer la comparaison</p>';
        return;
      }

      selected.forEach(key => {
        const data = companyData[key];
        const card = document.createElement('div');
        card.className = 'compare-card';
        card.innerHTML = `
          <h3>${data.name}</h3>
          <ul>
            <li><strong>Visites :</strong> ${data.visits.toLocaleString()}</li>
            <li><strong>Établissements :</strong> ${data.establishments}</li>
            <li><strong>Année :</strong> ${data.year}</li>
            <li><strong>Trafic organique :</strong> ${data.organic}%</li>
            <li><strong>Taux rebond :</strong> ${data.bounce}%</li>
            <li><strong>Pages/visite :</strong> ${data.pages}</li>
          </ul>
        `;
        results.appendChild(card);
      });
    }

    // Charts
    function getChartColors() {
      const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
      return {
        primary: isDark ? '#4a9eff' : '#003d7a',
        secondary: isDark ? '#5ca8ff' : '#0066cc',
        text: isDark ? '#e8e8e8' : '#1a1a1a',
        grid: isDark ? '#2d3748' : '#e5e5e5',
        colors: [
          isDark ? '#4a9eff' : '#003d7a',
          isDark ? '#5ca8ff' : '#0066cc',
          isDark ? '#7db9ff' : '#00a8ff',
          isDark ? '#3d8ae8' : '#0052a3',
          isDark ? '#5ca8ff' : '#17a2b8',
          isDark ? '#7db9ff' : '#28a745'
        ]
      };
    }

    function createCharts() {
      const colors = getChartColors();

      // Destroy existing charts
      Chart.helpers.each(Chart.instances, function(instance) {
        instance.destroy();
      });

      const commonOptions = {
        responsive: true,
        maintainAspectRatio: true,
        plugins: {
          legend: {
            labels: {
              color: colors.text,
              font: { size: 12, weight: '600' }
            }
          }
        },
        scales: {
          y: {
            ticks: { color: colors.text },
            grid: { color: colors.grid }
          },
          x: {
            ticks: { color: colors.text },
            grid: { color: colors.grid }
          }
        }
      };

      // Visits Chart
      new Chart(document.getElementById('visitsChart'), {
        type: 'bar',
        data: {
          labels: ['Bienvenue', 'Esprit', 'My Happy', 'Cosy', 'Gitedegroupe'],
          datasets: [{
            label: 'Visites mensuelles',
            data: [10865, 34518, 1101, 1263, 64999],
            backgroundColor: colors.colors,
            borderRadius: 8
          }]
        },
        options: commonOptions
      });

      // Establishments Chart
      new Chart(document.getElementById('establishmentsChart'), {
        type: 'doughnut',
        data: {
          labels: ['Bienvenue', 'Esprit', 'My Happy', 'Cosy', 'Gitedegroupe'],
          datasets: [{
            data: [68, 40, 154, 1080, 1844],
            backgroundColor: colors.colors,
            borderWidth: 2
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              labels: {
                color: colors.text,
                font: { size: 11 }
              }
            }
          }
        }
      });

      // Organic Traffic Chart
      new Chart(document.getElementById('organicChart'), {
        type: 'radar',
        data: {
          labels: ['Bienvenue', 'Esprit', 'My Happy', 'Cosy', 'Gitedegroupe'],
          datasets: [{
            label: '% Trafic organique',
            data: [59.6, 52.6, 36.9, 62.3, 64.6],
            backgroundColor: colors.colors[0] + '33',
            borderColor: colors.colors[0],
            borderWidth: 2,
            pointBackgroundColor: colors.colors[0]
          }]
        },
        options: {
          responsive: true,
          scales: {
            r: {
              ticks: { color: colors.text },
              grid: { color: colors.grid },
              pointLabels: { color: colors.text }
            }
          },
          plugins: {
            legend: {
              labels: { color: colors.text }
            }
          }
        }
      });

      // Engagement Chart (Pages per visit)
      new Chart(document.getElementById('engagementChart'), {
        type: 'line',
        data: {
          labels: ['Bienvenue', 'Esprit', 'My Happy', 'Cosy', 'Gitedegroupe'],
          datasets: [{
            label: 'Pages par visite',
            data: [2.32, 2.48, 2.50, 1.97, 4.42],
            borderColor: colors.colors[1],
            backgroundColor: colors.colors[1] + '33',
            tension: 0.4,
            fill: true,
            borderWidth: 3,
            pointRadius: 6
          }]
        },
        options: commonOptions
      });

      // Bounce Rate Chart
      new Chart(document.getElementById('bounceChart'), {
        type: 'bar',
        data: {
          labels: ['Bienvenue', 'Esprit', 'My Happy', 'Cosy', 'Gitedegroupe'],
          datasets: [{
            label: 'Taux de rebond (%)',
            data: [39.9, 47.8, 39.8, 43.6, 37.1],
            backgroundColor: colors.colors.map((c, i) =>
              [39.9, 47.8, 39.8, 43.6, 37.1][i] < 40 ? '#28a745' :
              [39.9, 47.8, 39.8, 43.6, 37.1][i] < 45 ? '#ffc107' : '#dc3545'
            ),
            borderRadius: 8
          }]
        },
        options: commonOptions
      });

      // Traffic Sources (Stacked)
      new Chart(document.getElementById('trafficChart'), {
        type: 'bar',
        data: {
          labels: ['Bienvenue', 'Esprit', 'My Happy', 'Cosy', 'Gitedegroupe'],
          datasets: [
            {
              label: 'Organique',
              data: [59.6, 52.6, 36.9, 62.3, 64.6],
              backgroundColor: colors.colors[0]
            },
            {
              label: 'Direct',
              data: [10, 29.8, 13.2, 10.3, 30.8],
              backgroundColor: colors.colors[1]
            },
            {
              label: 'Social',
              data: [25.3, 5.3, 33.3, 3.7, 0.5],
              backgroundColor: colors.colors[2]
            },
            {
              label: 'Autres',
              data: [5.1, 12.3, 16.6, 23.7, 4.1],
              backgroundColor: colors.colors[3]
            }
          ]
        },
        options: {
          ...commonOptions,
          scales: {
            ...commonOptions.scales,
            x: { stacked: true, ticks: { color: colors.text }, grid: { color: colors.grid } },
            y: { stacked: true, ticks: { color: colors.text }, grid: { color: colors.grid } }
          }
        }
      });
    }

    // PDF Export
    function downloadPDF() {
      const btn = document.getElementById('exportPdf');
      btn.innerHTML = '<span class="loading"></span> Génération...';
      btn.disabled = true;

      const element = document.getElementById('content');
      const opt = {
        margin: 10,
        filename: 'analyse-concurrentielle-septembre-2025.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2, useCORS: true },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
      };

      html2pdf().set(opt).from(element).save().then(() => {
        btn.innerHTML = '📄 Export PDF';
        btn.disabled = false;
      });
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', () => {
      createCharts();

      // Smooth scroll for nav links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });
    });
  </script>
</body>
</html>
